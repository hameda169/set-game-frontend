(window.webpackJsonpset_game_frontend=window.webpackJsonpset_game_frontend||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(41),s=a.n(o),r=(a(59),a(48)),l=a(7),i=(a(60),a(61),a(42)),m=a(43),d=a(51),u=a(44),h=a(52),f=a(8),g=a(45),E=a(46),v=a.n(E),p=a(16),N=a(102),k=a(101),_="https://game-set.herokuapp.com";function b(e){var t=e.shape,a=e.color,n=e.num,o=e.fill,s=e.onClick,r=e.active,l=e.width,i=e.height,m=Object(g.a)(e,["shape","color","num","fill","onClick","active","width","height"]),d="".concat(t).concat(a).concat(n).concat(o);o=0===o?"00":1===o?"45":"cc",a=0===a?"#ff0000":1===a?"#00aa00":"#0000ff",n+=1;var u=function(e){return c.a.createElement("div",null,0===t&&c.a.createElement(p.Triangle,e),1===t&&c.a.createElement(p.Rectangle,e),2===t&&c.a.createElement(p.Ellipse,Object.assign({},e,{rx:e.width/2,ry:e.height/2})))};return c.a.createElement("div",Object.assign({},m,{className:"game-cards ".concat(r?"active":""),onClick:function(){return s(d)},style:{width:l?30:null,height:i?50:null}}),Object(f.a)(Array(n)).map((function(e,t){return c.a.createElement(u,{key:"".concat(t),width:l||90,height:i||50,fill:{color:"".concat(a).concat(o)},stroke:{color:a},strokeWidth:i?i/10:5})})),r&&c.a.createElement("div",{className:"my-badge"},"\u2713"))}var S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).message_received=function(e){console.log(e)},a._join=function(){a.state.name.length<2?alert("Please Enter Your Name"):a.state.isJoined?console.log("You Are joined the room"):a.socket.emit("join",{name:a.state.name,room:"".concat(a.roomId)})},a._start=function(){a.state.isStarted?console.log("Game is started"):a.socket.emit("start_room",{id:a.roomId})},a._deal=function(){a.socket.emit("deal",{room:a.roomId})},a._challenge=function(e){a.state.restricted||3!==e.length||a.socket.emit("challenge",{cards:e,room:a.roomId}),a.state.restricted&&(a.setState({selected:[]}),console.log("You are restricted"))},a._cardClicked=function(e){a.state.selected.includes(e)?a.setState({selected:Object(f.a)(a.state.selected.filter((function(t){return t!==e})))}):a.state.cards.includes(e)&&a.setState({selected:[].concat(Object(f.a)(a.state.selected),[e])},(function(){return a._challenge(a.state.selected)}))},a._joinResult=function(e,t){console.log("Join",e,t),0===e&&(a.setState({userPublicId:t.id,userSid:t.sid,isJoined:!0,roomName:t.room_name}),console.log("You joined room successfully"))},a._initGame=function(e){console.log("Init",e),a.setState({cards:e.cards,isStarted:!0})},a._challengeResponse=function(e,t){console.log("Challenge",e,t),a.setState({selected:[]}),0===e?(a.setState({cards:Object(f.a)(a.state.cards).filter((function(e){return!t.cards.includes(e)})),restricted:!1}),a.setState({users:t.users})):t.id===a.state.userPublicId?a.setState({restricted:!0}):a.setState({restricted:!1})},a._dealResponse=function(e,t){0===e&&a.setState({cards:[].concat(Object(f.a)(a.state.cards),Object(f.a)(t.cards))})},a._initSocket=function(){a.socket=v()(a.state.endpoint),a.socket.on("message",a.message_received),a.socket.on("join_success",(function(e){return a._joinResult(0,e)})),a.socket.on("init",a._initGame),a.socket.on("challenge_success",(function(e){return a._challengeResponse(0,e)})),a.socket.on("challenge_fail",(function(e){return a._challengeResponse(1,e)})),a.socket.on("deal_success",(function(e){return a._dealResponse(0,e)})),a.socket.on("deal_fail",(function(e){return a._dealResponse(1,e)}))},a.nameChanged=function(e){a.setState({name:e.target.value})},a.socket=null,a.roomId=e.match.params.id,a.state={name:"",endpoint:_,roomName:"",cards:[],selected:[],isJoined:!1,isStarted:!1,userPublicId:"",userSid:"",restricted:!1,errorMessage:null,users:{}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.state.endpoint,"/room/").concat(this.roomId)).then((function(e){return e.json()})).then((function(t){console.log(t),t.started?e.setState({errorMessage:"This room is now started"}):e._initSocket()}))}},{key:"render",value:function(){var e,t,a=this;e=parseInt(Math.sqrt(this.state.cards.length)+.9),t=parseInt(Math.sqrt(this.state.cards.length)+.9);var n=Object(f.a)(Array(e)).map((function(e,n){return a.state.cards.slice(n*t,t*(n+1))}));return c.a.createElement("div",{className:"container"},this.state.errorMessage&&c.a.createElement("div",{className:"row error"},this.state.errorMessage),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("div",{className:"col panel"},c.a.createElement("div",null,this.state.isJoined?c.a.createElement("div",{style:{marginTop:20}},c.a.createElement(N.a,{disabled:this.state.isJoined},"Your Name: ",this.state.name)):c.a.createElement("form",{className:"form-horizontal",id:"creating",onSubmit:this._join,style:{display:"flex"}},c.a.createElement("div",{className:"form-group",style:{flex:1}},c.a.createElement("div",null,c.a.createElement("input",{className:"form-control",onChange:this.nameChanged,placeholder:"Enter Name"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",null,c.a.createElement(N.a,{onClick:this._join},"Join Room"))))),this.state.isJoined&&c.a.createElement("div",{style:{marginTop:20}},c.a.createElement(N.a,{disabled:this.state.isJoined},"Room: ",this.state.roomName)),this.state.isJoined&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{marginTop:20}},c.a.createElement(N.a,{disabled:this.state.isStarted,onClick:this._start},this.state.isStarted?"Started":"Start Room")),c.a.createElement("div",{style:{marginTop:20}},c.a.createElement(N.a,{onClick:this._deal},"New Cards")),c.a.createElement("div",{style:{marginTop:20}},Object.values(this.state.users).map((function(e,t){return c.a.createElement(k.a,{key:"".concat(t)},"".concat(t+1,".").concat(e.name,": ").concat(e.scores.length))})))))),c.a.createElement("div",{className:"col-sm-9"},c.a.createElement("div",{style:{textAlign:"center",backgroundColor:"darkseagreen",width:"100%",minHeight:"100vh"}},n.map((function(e,t){return c.a.createElement("div",{key:"".concat(t),className:"cards-row"},e.map((function(e,t){var n=a.state.selected.indexOf(e)>-1;return e=e.split("").map((function(e){return parseInt(e)})),c.a.createElement(b,{key:"".concat(t),shape:e[0],color:e[1],num:e[2],fill:e[3],active:n,onClick:a._cardClicked})})))}))))))}}]),t}(n.Component);var y=function(e){var t=function(t){e.history.push("/game/".concat(t))},a=function(e){if(0===e){var a=document.getElementById("name").value;fetch("".concat(_,"/room"),{method:"POST",body:JSON.stringify({name:a}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),"createRoom_success"===e.type&&t(e.room.id)}))}if(1===e){var n=document.getElementById("id").value;t(n)}};return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("div",{className:"create"},c.a.createElement("h2",null,"Create Room"),c.a.createElement("form",{className:"form-horizontal",id:"creating",onSubmit:function(){return a(0)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label col-sm-2"},"Name:"),c.a.createElement("div",{className:"col-sm-10"},c.a.createElement("input",{className:"form-control",id:"name",placeholder:"Enter Name",name:"name"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"col-sm-offset-2 col-sm-10"},c.a.createElement(N.a,{onClick:function(){return a(0)}},"Submit")))))),c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("div",{className:"create"},c.a.createElement("h2",null,"Join Room"),c.a.createElement("form",{className:"form-horizontal",id:"joining",onSubmit:function(){return a(1)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label col-sm-3"},"Room Id:"),c.a.createElement("div",{className:"col-sm-10"},c.a.createElement("input",{className:"form-control",id:"id",placeholder:"Enter Room Id",name:"id"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"col-sm-offset-2 col-sm-10"},c.a.createElement(N.a,{onClick:function(){return a(1)}},"Submit"))))))))},j=function(){return c.a.createElement(r.a,null,c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/",component:y}),c.a.createElement(l.a,{strict:!0,path:"/game/:id",component:S})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e,t,a){e.exports=a(100)},59:function(e,t,a){},61:function(e,t,a){},90:function(e,t){}},[[54,1,2]]]);
//# sourceMappingURL=main.2f671483.chunk.js.map